<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">
<head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <title> noqqe.de &middot; noqqe.de </title>

  
  <link rel="stylesheet" href="http://localhost:1313/css/poole.css">
  <link rel="stylesheet" href="http://localhost:1313/css/syntax.css">
  <link rel="stylesheet" href="http://localhost:1313/css/hyde.css">
  <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=PT+Sans:400,400italic,700|Abril+Fatface">

  
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/apple-touch-icon-144-precomposed.png">
  <link rel="shortcut icon" href="/favicon.ico">

  
  <link href="http://localhost:1313/index.xml" rel="alternate" type="application/rss+xml" title="noqqe.de" />
</head>

<body>

<div class="sidebar">
  <div class="container sidebar-sticky">
    <div class="sidebar-about">
      <h1>noqqe.de</h1>
      <p class="lead">
      An elegant open source and mobile first theme for <a href="http://hugo.spf13.com">hugo</a> made by <a href="http://twitter.com/mdo">@mdo</a>. Originally made for Jekyll.
      </p>
    </div>

    <ul class="sidebar-nav">
      <li><a href="/">Home</a> </li>
      
    </ul>

    <p>&copy; 2015. All rights reserved. </p>
  </div>
</div>


    <div class="content container">
<div class="posts">

      
  <div class="post">
    <h1 class="post-title">
      <a href="http://localhost:1313/foobar/">
        foobarasdfsadf
      </a>
    </h1>

    <span class="post-date">Mon, Mar 30, 2015</span>

    <p>test, ckack</p>

  </div>
  
  <div class="post">
    <h1 class="post-title">
      <a href="http://localhost:1313/yolo/">
        yolo
      </a>
    </h1>

    <span class="post-date">Mon, Mar 30, 2015</span>

    

<h3 id="test1:6846e205d4acbde74878c8b2ccf1cdab">Test1</h3>

<p>adsfadfasdf</p>

<p>asdfadsfasdfasdfasdfö#adjsfälkadjsf</p>

  </div>
  
  <div class="post">
    <h1 class="post-title">
      <a href="http://localhost:1313/opbsd/">
        OpenBL in pf
      </a>
    </h1>

    <span class="post-date">Mon, Mar 30, 2015</span>

    <p>Das Projekt <a href="https://openbl.org">OpenBL</a>, dass ursprünglich die OpenSSH
Blacklist war, hat auf der ganzen Welt verteilte Honeypots rumstehen und
publiziert regelmäßig Blacklisten sortiert nach Zeitraum und Protokoll des
Angriffs.</p>

<p>{% img center /uploads/<sup>2015</sup>&frasl;<sub>02</sub>/assholes.jpg %}</p>

<p>Das Resultat daraus kann jeder frei benutzen und zum Beispiel in seine
Firewall einbauen. Realisiert hab ich das über einen <code>pf</code> Table.</p>

<pre><code>table &lt;blacklist&gt; persist
pass in quick from &lt;admins&gt;
block quick from &lt;blacklist&gt;
</code></pre>

<p>Die Regel ist relativ unspektakulär, abgesehen davon, dass die pass-Regel
für die Admin IPs vor der Blacklist-Block Regel matchen sollte. Nur für den
Fall dass man mal selbst auf so einer Liste landen sollte.
Ein kleines Bash Script, dass mit Cron einmal die Woche die IPs updated.</p>

<pre><code class="language-bash">#!/usr/local/bin/bash
STORE=&quot;/tmp/&quot;
RULES=&quot;base.txt.gz&quot;
TABLE=&quot;blacklist&quot;
/usr/local/bin/wget -q https://www.openbl.org/lists/$RULES -P $STORE
gunzip $STORE/$RULES
pfctl -t $TABLE -T flush
pfctl -t $TABLE -T add -f $STORE/${RULES%.*}
rm $STORE/${RULES%.*}
</code></pre>

<p>Es gibt natürlich auch 10.000 andere Listen, die sowas bewerkstelligen.
Darunter auch ganze
<a href="https://github.com/khainebot/Blocklist-Downloader/blob/master/blocklistdownloader.py">Wrapper</a>
die solche Listen parsen. War mir aber dann etwas zu hart overengineert.</p>

  </div>
  
</div>
</div>

  </body>
</html>
